(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[37],{4865:function(e,a,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/panelimprezy",function(){return o(1469)}])},7345:function(e,a,o){"use strict";var n=o(5893),s=o(2717),l=o.n(s);a.Z=e=>(0,n.jsx)("div",{className:l().layout,children:(0,n.jsx)("div",{className:l().container,children:e.children})})},1469:function(e,a,o){"use strict";o.r(a),o.d(a,{default:function(){return k}});var n=o(5893),s=o(7345),l=o(6402),t=o.n(l),r=o(3321),i=o(2908),c=o(6273),d=o(7294),h=o(7361),u=()=>{let[e,a]=(0,d.useState)({});(0,d.useEffect)(()=>{let e=async()=>{let e=await fetch("/api/getFoodData"),o=await e.json();a(o)};e()},[]);let o=(0,d.useMemo)(()=>[{accessorKey:"name",header:"Imię",size:50},{accessorKey:"text",header:"Zaopatrzenie",size:200}],[]);return(0,n.jsx)(h.P2,{columns:o,data:e,enableColumnActions:!1,enableColumnFilters:!1,enablePagination:!1,enableSorting:!1,enableBottomToolbar:!1,enableTopToolbar:!1,muiTableBodyRowProps:{hover:!1},muiTableProps:{sx:{border:"2px solid black"}},muiTableHeadCellProps:{sx:{color:"black"}},muiTableBodyCellProps:{sx:{color:"black"}}})},b=o(5352),p=o.n(b),x=e=>(0,n.jsx)("div",{className:p().box,children:e.children}),m=o(7041),j=()=>{let[e,a]=(0,d.useState)({});(0,d.useEffect)(()=>{let e=async()=>{let e=await fetch("/api/getAccomData"),o=await e.json();a(o)};e()},[]);let o=(0,d.useMemo)(()=>[{accessorKey:"id",header:"ID",size:100},{accessorKey:"place",header:"Miejsce",size:100},{accessorKey:"count",header:"Dla ilu os\xf3b",size:100},{accessorKey:"status",header:"Status",size:100},{accessorKey:"name",header:"Rezerwacja",size:100}],[]);return(0,n.jsx)(h.P2,{columns:o,data:e,enableColumnActions:!1,enableColumnFilters:!1,enablePagination:!1,enableSorting:!1,enableBottomToolbar:!1,enableTopToolbar:!1,muiTableBodyRowProps:{hover:!1},muiTableProps:{sx:{border:"2px solid black"}},muiTableHeadCellProps:{sx:{color:"black"}},muiTableBodyCellProps:{sx:{color:"black"}}})},y=()=>{let[e,a]=(0,d.useState)({});(0,d.useEffect)(()=>{let e=async()=>{let e=await fetch("/api/getApproachData"),o=await e.json(),n=o.map(e=>"car"===e.approach?{...e,approach:"Jadę autem"}:"together"===e.approach?{...e,approach:"Chcę się z kimś zabrać"}:{...e,approach:"Jeszcze nie wiem"});a(n)};e()},[]);let o=(0,d.useMemo)(()=>[{accessorKey:"name",header:"Imię",size:100},{accessorKey:"approach",header:"Dojazd",size:100}],[]);return console.log(e),(0,n.jsx)(h.P2,{columns:o,data:e,enableColumnActions:!1,enableColumnFilters:!1,enablePagination:!1,enableSorting:!1,enableBottomToolbar:!1,enableTopToolbar:!1,muiTableBodyRowProps:{hover:!1},muiTableProps:{sx:{border:"2px solid black"}},muiTableHeadCellProps:{sx:{color:"black"}},muiTableBodyCellProps:{sx:{color:"black"}}})};let C=()=>{let[e,a]=(0,d.useState)(!1),[o,s]=(0,d.useState)(!1),[l,t]=(0,d.useState)(),h=async(e,o)=>{let n=await fetch("/api/saveFood",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,text:o})});n.ok?a(!1):s(!0)},u=async()=>{if(l){let e=(0,m.getCookie)("name");e?await h(e,l):await h("Unknown",l)}else s(!0)};return(0,n.jsxs)(d.Fragment,{children:[(0,n.jsx)(r.Z,{color:"secondary",onClick:()=>{a(!0)},children:"DODAJ ZAOPATRZENIE"}),(0,n.jsx)(i.Z,{open:e,onClose:u,"aria-labelledby":"child-modal-title","aria-describedby":"child-modal-description",children:(0,n.jsxs)(x,{children:[(0,n.jsx)(c.Z,{error:o,id:"standard-basic",label:"ZAOPATRZENIE",variant:"standard",color:"secondary",onChange:e=>{s(!1),t(e.target.value)}}),(0,n.jsx)(r.Z,{color:"secondary",onClick:u,children:"DODAJ"}),(0,n.jsx)(r.Z,{color:"secondary",onClick:()=>{a(!1)},children:"ANULUJ"})]})})]})},f=()=>{let[e,a]=(0,d.useState)(!1),[o,s]=(0,d.useState)(!1),[l,t]=(0,d.useState)(),h=async(e,o)=>{let n=await fetch("/api/bookPlace",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,name:o})});n.ok?a(!1):s(!0)},u=async e=>{try{let a=await fetch("/api/checkIfBooked?id="+e),o=await a.json();return"WOLNE"===o.status}catch(e){return console.log(e),!1}},b=async()=>{if(l){let e=await u(l);if(e){let e=(0,m.getCookie)("name");e?await h(l,e):await h(l,"Unknown")}else s(!0)}else s(!0)};return(0,n.jsxs)(d.Fragment,{children:[(0,n.jsx)(r.Z,{color:"secondary",onClick:()=>{a(!0)},children:"REZERWUJ"}),(0,n.jsx)(i.Z,{open:e,onClose:b,"aria-labelledby":"child-modal-title","aria-describedby":"child-modal-description",children:(0,n.jsxs)(x,{children:[(0,n.jsx)(c.Z,{error:o,id:"standard-basic",label:"ID MIEJSCA",variant:"standard",color:"secondary",onChange:e=>{s(!1),t(e.target.value)}}),(0,n.jsx)(r.Z,{color:"secondary",onClick:b,children:"REZERWUJ"}),(0,n.jsx)(r.Z,{color:"secondary",onClick:()=>{a(!1)},children:"ANULUJ"})]})})]})};var _=()=>{let[e,a]=(0,d.useState)(!1),[o,s]=(0,d.useState)(!1),[l,c]=(0,d.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.Z,{open:e,onClose:()=>a(!1),children:(0,n.jsxs)(x,{children:[(0,n.jsx)(u,{}),(0,n.jsx)(C,{})]})}),(0,n.jsx)(i.Z,{open:o,onClose:()=>s(!1),children:(0,n.jsxs)(x,{children:[(0,n.jsx)("h2",{className:t().hMsg,children:"Tabela dojazd\xf3w"}),(0,n.jsx)(y,{})]})}),(0,n.jsx)(i.Z,{open:l,onClose:()=>c(!1),children:(0,n.jsxs)(x,{children:[(0,n.jsx)(j,{}),(0,n.jsx)(f,{})]})}),(0,n.jsxs)("div",{className:t().container,children:[(0,n.jsx)("div",{className:t().head,children:(0,n.jsx)("h4",{children:"Witaj w panelu imprezy!"})}),(0,n.jsxs)("div",{className:t().main,children:[(0,n.jsx)(r.Z,{variant:"contained",sx:{width:"50%"},color:"secondary",onClick:()=>a(!0),children:"PANEL ZAOPATRZENIA"}),(0,n.jsx)(r.Z,{variant:"contained",sx:{width:"50%"},color:"secondary",onClick:()=>s(!0),children:"PANEL DOJAZDU"}),(0,n.jsx)(r.Z,{variant:"contained",sx:{width:"50%"},color:"secondary",onClick:()=>c(!0),children:"PANEL NOCLEGU"})]})]})]})},g=o(1163);function k(){let e=(0,g.useRouter)(),a=(0,m.getCookie)("loginValid");return(0,d.useEffect)(()=>{a||e.push("/login")},[]),(0,n.jsx)(s.Z,{children:(0,n.jsx)(_,{})})}},5352:function(e){e.exports={box:"box_box__d70RD"}},2717:function(e){e.exports={layout:"layout_layout__Xf50c",container:"layout_container__fbLkO"}},6402:function(e){e.exports={container:"panel_container__zHCXr",head:"panel_head__9GChc",hMsg:"panel_hMsg__mlRw2",logoMsg:"panel_logoMsg__LgcYu",main:"panel_main__R_jVD"}}},function(e){e.O(0,[52,63,646,658,273,410,774,888,179],function(){return e(e.s=4865)}),_N_E=e.O()}]);